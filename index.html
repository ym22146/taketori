<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>竹の中のあなた診断</title>
    <style>
        /* 基本のスタイル */
        .question {
            margin: 20px 0;
        }
        .question label {
            font-weight: bold;
        }
        .result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        .result img {
            display: block;
            margin: 10px 0;
            max-width: 200px;
            height: auto;
        }

        /* 竹が割れるアニメーション */
        .bamboo-container {
            position: relative;
            width: 100px;
            height: 400px;
            background-color: #5c8d7e;
            margin: 0 auto;
            overflow: hidden;
            display: none; /* 初期状態では非表示 */
        }

        .bamboo {
            width: 100%;
            height: 100%;
            background-color: #4d6e56;
            position: absolute;
            transition: transform 2s ease-in-out;
        }

        .crack-left,
        .crack-right {
            position: absolute;
            width: 50%;
            height: 100%;
            background-color: #4d6e56;
        }

        .crack-left {
            left: 0;
            animation: crackLeft 2s forwards;
        }

        .crack-right {
            right: 0;
            animation: crackRight 2s forwards;
        }

        @keyframes crackLeft {
            0% {
                transform: scaleX(1);
            }
            100% {
                transform: scaleX(0);
                opacity: 0;
            }
        }

        @keyframes crackRight {
            0% {
                transform: scaleX(1);
            }
            100% {
                transform: scaleX(0);
                opacity: 0;
            }
        }

        /* 結果メッセージ表示アニメーション */
        #message {
            display: none;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            animation: showMessage 2s forwards;
        }

        @keyframes showMessage {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <h1>竹の中のあなた診断</h1>
    <p>「竹取物語」の登場人物に似ているのはあなた？診断を始めましょう！</p>
    <form id="quizForm">
        <div class="question">
            <label>1. 他人の感情に敏感で、その心情に寄り添うことが得意だ</label><br>
            <input type="radio" name="q1" value="5"> とてもそう思う<br>
            <input type="radio" name="q1" value="4"> かなりそう思う<br>
            <input type="radio" name="q1" value="3"> どちらともいえない<br>
            <input type="radio" name="q1" value="2"> あまりそう思わない<br>
            <input type="radio" name="q1" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>2. 自分が決めたことは最後までやりとげる</label><br>
            <input type="radio" name="q2" value="5"> とてもそう思う<br>
            <input type="radio" name="q2" value="4"> かなりそう思う<br>
            <input type="radio" name="q2" value="3"> どちらともいえない<br>
            <input type="radio" name="q2" value="2"> あまりそう思わない<br>
            <input type="radio" name="q2" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>3. 罪悪感を感じて悩むことが多い</label><br>
            <input type="radio" name="q3" value="5"> とてもそう思う<br>
            <input type="radio" name="q3" value="4"> かなりそう思う<br>
            <input type="radio" name="q3" value="3"> どちらともいえない<br>
            <input type="radio" name="q3" value="2"> あまりそう思わない<br>
            <input type="radio" name="q3" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>4. 無駄だと思うものをすぐに捨てられるタイプだ</label><br>
            <input type="radio" name="q4" value="5"> とてもそう思う<br>
            <input type="radio" name="q4" value="4"> かなりそう思う<br>
            <input type="radio" name="q4" value="3"> どちらともいえない<br>
            <input type="radio" name="q4" value="2"> あまりそう思わない<br>
            <input type="radio" name="q4" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>5. 目標達成のためにリスクを取ることを恐れない</label><br>
            <input type="radio" name="q5" value="5"> とてもそう思う<br>
            <input type="radio" name="q5" value="4"> かなりそう思う<br>
            <input type="radio" name="q5" value="3"> どちらともいえない<br>
            <input type="radio" name="q5" value="2"> あまりそう思わない<br>
            <input type="radio" name="q5" value="1"> 全くそう思わない
        </div>
        <button type="button" onclick="submitForm()">結果を表示</button>
    </form>

    <!-- 竹割れアニメーション -->
    <div id="bamboo-container" class="bamboo-container">
        <div id="bamboo" class="bamboo"></div>
        <div id="crack-left" class="crack-left"></div>
        <div id="crack-right" class="crack-right"></div>
    </div>

    <div id="message" class="result"></div>

    <script>
        // 竹の割れる音を再生
        function playBambooSound() {
            var audio = new Audio('bamboo-crack.mp3');  // 竹が割れる音のファイル
            audio.play();
        }

        function getSelectedValue(name) {
            const radios = document.getElementsByName(name);
            for (let radio of radios) {
                if (radio.checked) {
                    return parseInt(radio.value);
                }
            }
            return 0;  // 選択肢が選ばれていない場合
        }

        function submitForm() {
            const scores = {
                q1: getSelectedValue('q1'),
                q2: getSelectedValue('q2'),
                q3: getSelectedValue('q3'),
                q4: getSelectedValue('q4'),
                q5: getSelectedValue('q5')
            };

            const maxScore = Math.max(scores.q1, scores.q2, scores.q3, scores.q4, scores.q5);
            let resultMessage = "";
            let resultImage = "";

            // 竹が割れる演出を表示
            document.getElementById('bamboo-container').style.display = "block"; // 竹を表示
            playBambooSound(); // 竹が割れる音を再生

            // 条件1: 情熱/コミットメントと誠実さが4点以上
            if ((scores.q1 >= 4 && scores.q2 >= 4) || (scores.q3 >= 4 && scores.q4 >= 4)) {
                resultMessage = "あなたは帝です！\n情熱と誠実さが光る人物です。帝はかぐや姫と3年間の間手紙をやり取りし、心を通わせました。その根気強さと情熱が光るあなたは竹取物語の中でも圧倒的な存在感を放ちます。";
                resultImage = "<img src='https://file+.vscode-resource.vscode-cdn.net/c%3A/Users/yuna_/OneDrive/%E7%94%BB%E5%83%8F/Saved%20Pictures/images/pictures/mikado.jpg?version%3D1734646418084' alt='帝の画像'>";
            }
            // 条件2: 全部5点
            else if (scores.q1 === 5 && scores.q2 === 5 && scores.q3 === 5 && scores.q4 === 5 && scores.q5 === 5) {
                resultMessage = "あなたは帝です！\n思いやり、責任感、誠実さ、合理性、目標達成への高い意識の全てを備えるあなたは、竹取物語で一番の王者、帝のような存在です。モテモテのかぐや姫は、五人の貴公子と帝からの求婚を拒みましたが、帝とだけは三年間手紙のやり取りが続き、心を通わせました。様々な面において魅力があるあなたはまさに帝です。";
                resultImage = "<img src='https://file+.vscode-resource.vscode-cdn.net/c%3A/Users/yuna_/OneDrive/%E7%94%BB%E5%83%8F/Saved%20Pictures/images/pictures/mikado.jpg?version%3D1734646418084' alt='帝の画像'>";
            }
            // 条件3: 全部2, 3, 4点
            else if (
                (scores.q1 >= 2 && scores.q1 <= 4) &&
                (scores.q2 >= 2 && scores.q2 <= 4) &&
                (scores.q3 >= 2 && scores.q3 <= 4) &&
                (scores.q4 >= 2 && scores.q4 <= 4) &&
                (scores.q5 >= 2 && scores.q5 <= 4)
            ) {
                resultMessage = "あなたは竹取の夫婦です！\nどの質問もバランスが取れているあなたは、優しく、強くかぐや姫を支える竹取の夫婦のような存在です。";
                resultImage = "<img src='images/pictures/taketorihuhu.jpg' alt='竹取の夫婦の画像'>";
            }
            // 条件4: q1が最大点
            else if (scores.q1 === maxScore) {
                resultMessage = "あなたはかぐや姫です！\n他人の感情に敏感で、周囲の心情に寄り添う姿勢は、竹取物語でかぐや姫が人々に深い影響を与える姿と重なります。かぐや姫は月に帰らなければいけないことを思い出し、月を見て静かに泣く繊細な人物です。";
                resultImage = "<img src='images/pictures/kaguyahime.jpg' alt='かぐや姫の画像'>";
            }
            // 条件5: その他の各選択肢
            else if (scores.q2 === maxScore) {
                resultMessage = "あなたは竹取の夫婦です！\n自分が決めたことを最後までやりとげる責任感があるあなたは、竹取の翁と妻のように、強い意志を持って大事な人を支えられる人です。";
                resultImage = "<img src='images/pictures/taketorihuhu.jpg' alt='竹取の夫婦の画像'>";
            }
            else if (scores.q3 === maxScore) {
                resultMessage = "あなたは大伴のみゆきです！\n自分の過ちを反省できる誠実なあなたは、他の位の高い貴公子たちとは違い、誠実な対応をした大伴のみゆきに似ています。";
                resultImage = "<img src='images/pictures/ootomonomiyuki.jpg' alt='大伴のみゆきの画像'>";
            }
            else if (scores.q4 === maxScore) {
                resultMessage = "あなたは月の使者です！\n無駄なものをすぐに捨てられるあなたは、竹取物語で月の使者が竹取の夫婦が必死に止めるのは気にせず、月にかぐや姫を連れて帰るという目的のために動ける、冷静な月の使者の姿に似ています。";
                resultImage = "<img src='images/pictures/tukinosisya.jpg' alt='月の使者の画像'>";
            }
            else if (scores.q5 === maxScore) {
                resultMessage = "あなたは石作りの皇子です！\nリスクを恐れず、目標を達成するために突き進むあなたは、竹取物語でかぐや姫を手に入れるために何とかしようと知恵を絞って行動する石作りの皇子のように冒険的な性格の持ち主です。";
                resultImage = "<img src='images/pictures/isitukurinomiko.jpg' alt='石作りの皇子の画像'>";
            }
            // 条件6: その他の場合
            else {
                resultMessage = "あなたは竹取物語の作者です。\nあなたは型に当てはまらない独自の視点を持つ謎めいた人物のようです。ロングヒット作品を生み出す独創性を感じるうえに、情報がほとんどないミステリアスな作者と似ています。";
                resultImage = "<img src='images/pictures/sakusya.jpg' alt='作者の画像'>";
            }

            // 結果の表示
            document.getElementById("message").innerHTML = resultMessage + resultImage;
            document.getElementById("message").style.display = "block"; // メッセージ表示
        }
    </script>
</body>
</html>
