<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>竹の中のあなた診断</title>
    <style>
        .question {
            margin: 20px 0;
        }
        .question label {
            font-weight: bold;
        }
        .result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        .result img {
            display: block;
            margin: 10px 0;
            max-width: 200px; /* 画像サイズを小さく設定 */
            height: auto; /* 高さを自動調整 */
        }

        /* 竹が割れるアニメーション */
        .bamboo-container {
            position: relative;
            width: 100px;
            height: 400px;
            background-color: #5c8d7e;
            margin: 0 auto;
            overflow: hidden;
            display: none;
        }

        .bamboo {
            width: 100%;
            height: 100%;
            background-color: #4d6e56;
            position: absolute;
            transition: transform 2s ease-in-out;
        }

        .crack-left,
        .crack-right {
            position: absolute;
            width: 50%;
            height: 100%;
            background-color: #4d6e56;
        }

        .crack-left {
            left: 0;
            animation: crackLeft 2s forwards;
        }

        .crack-right {
            right: 0;
            animation: crackRight 2s forwards;
        }

        @keyframes crackLeft {
            0% {
                transform: scaleX(1);
            }
            100% {
                transform: scaleX(0);
                opacity: 0;
            }
        }

        @keyframes crackRight {
            0% {
                transform: scaleX(1);
            }
            100% {
                transform: scaleX(0);
                opacity: 0;
            }
        }

        /* 結果メッセージ表示アニメーション */
        #message {
            display: none;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            animation: showMessage 2s forwards;
        }

        @keyframes showMessage {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <h1>竹の中のあなた診断</h1>
    <p>「竹取物語」は千年以上前に書かれた日本最古の物語ですが、そのテーマは今も私たちに響きます。竹の中から現れた美しいかぐや姫を巡る五人の貴公子たちの愛や試練、竹取の夫婦や帝との運命の物語は、現代の恋愛や人間関係にも通じる部分が多いです。さあ、あなたはどのキャラクターに似ているか、診断で運命の竹を割って確かめてみましょう！:</p>
    <form id="quizForm">
        <div class="question">
            <label>1. 他人の感情に敏感で、その心情に寄り添うことが得意だ</label><br>
            <input type="radio" name="q1" value="5"> とてもそう思う<br>
            <input type="radio" name="q1" value="4"> かなりそう思う<br>
            <input type="radio" name="q1" value="3"> どちらともいえない<br>
            <input type="radio" name="q1" value="2"> あまりそう思わない<br>
            <input type="radio" name="q1" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>2. 自分が決めたことは最後までやりとげる</label><br>
            <input type="radio" name="q2" value="5"> とてもそう思う<br>
            <input type="radio" name="q2" value="4"> かなりそう思う<br>
            <input type="radio" name="q2" value="3"> どちらともいえない<br>
            <input type="radio" name="q2" value="2"> あまりそう思わない<br>
            <input type="radio" name="q2" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>3. 罪悪感を感じて悩むことが多い</label><br>
            <input type="radio" name="q3" value="5"> とてもそう思う<br>
            <input type="radio" name="q3" value="4"> かなりそう思う<br>
            <input type="radio" name="q3" value="3"> どちらともいえない<br>
            <input type="radio" name="q3" value="2"> あまりそう思わない<br>
            <input type="radio" name="q3" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>4. 無駄だと思うものをすぐに捨てられるタイプだ</label><br>
            <input type="radio" name="q4" value="5"> とてもそう思う<br>
            <input type="radio" name="q4" value="4"> かなりそう思う<br>
            <input type="radio" name="q4" value="3"> どちらともいえない<br>
            <input type="radio" name="q4" value="2"> あまりそう思わない<br>
            <input type="radio" name="q4" value="1"> 全くそう思わない
        </div>
        <div class="question">
            <label>5. 目標達成のためにリスクを取ることを恐れない</label><br>
            <input type="radio" name="q5" value="5"> とてもそう思う<br>
            <input type="radio" name="q5" value="4"> かなりそう思う<br>
            <input type="radio" name="q5" value="3"> どちらともいえない<br>
            <input type="radio" name="q5" value="2"> あまりそう思わない<br>
            <input type="radio" name="q5" value="1"> 全くそう思わない
        </div>
        <button type="button" onclick="submitForm()">結果を表示</button>
    </form>

    <div id="bamboo-container" class="bamboo-container">
        <div id="bamboo" class="bamboo"></div>
        <div id="crack-left" class="crack-left"></div>
        <div id="crack-right" class="crack-right"></div>
    </div>
    
    <div id="message" class="result"></div>

    <script>
        // 竹の割れる音を再生
        function playBambooSound() {
            var audio = new Audio('bamboo-crack.mp3');  // 竹が割れる音のファイル
            audio.play();
        }

        function getSelectedValue(name) {
            const radios = document.getElementsByName(name);
            for (let radio of radios) {
                if (radio.checked) {
                    return parseInt(radio.value);
                }
            }
            return 0;  // 選択肢が選ばれていない場合
        }

        function submitForm() {
            const scores = {
                q1: getSelectedValue('q1'),
                q2: getSelectedValue('q2'),
                q3: getSelectedValue('q3'),
                q4: getSelectedValue('q4'),
                q5: getSelectedValue('q5')
            };

            const maxScore = Math.max(scores.q1, scores.q2, scores.q3, scores.q4, scores.q5);
            let resultMessage = "";
            let resultImage = "";

            // 竹が割れる演出を表示
            document.getElementById('bamboo-container').style.display = "block"; // 竹を表示
            playBambooSound(); // 竹が割れる音を再生

            // 結果メッセージと画像を設定
            if (scores.q1 === 5 && scores.q2 === 5 && scores.q3 === 5 && scores.q4 === 5 && scores.q5 === 5) {
                resultMessage = "あなたは帝です！";
                resultImage = "<img src='mikado.jpg' alt='帝の画像'>";
            } else {
                resultMessage = "あなたは竹取物語の登場人物に似ていない独自の存在です。";
                resultImage = "<img src='default.jpg' alt='デフォルト画像'>";
            }

            // 結果メッセージを表示
            document.getElementById("message").innerHTML = resultMessage + resultImage;
            document.getElementById("message").style.display = "block"; // メッセージ表示
        }
    </script>
</body>
</html>
